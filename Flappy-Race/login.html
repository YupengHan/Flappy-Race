<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Login</title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="/socket.io/socket.io.js"></script>
        <script>
            function connect() {
                var socket = io();
                socket.on('connect', function(){
                    console.log('authenticated');
                }).on('disconnect', function() {
                    console.log('disconnected');
                });

                $('#post').submit(function(err) {
                    err.preventDefault();
                    console.log("reseive request");
                    $.post('/login', {
                        username: $('username').val(),
                        password: $('password').val()
                    }).done(function(res) {
                        connect(res.token);
                    });
                });
            }
        </script>
    </head>

    <body>
        
        <h1>Login</h1>
        <center>
        		<div class="form-control">
        		    <label>Username</label>
        			<input type="text" class="form-control" name="username">
                </div>
                <div class="form-control">
        			<label>Password</label>
        			<input type="password" class="form-control" name="password">
                </div>
                <div class="form-control">
        		    <button type="submit" class="btn btn-warning brn-log" id="connect" onclick='connect()'>Login</button>
                </div>

        		<p>Need an account? <a href="./signup.html">signup</a></p>
                <p>Back to homepage <a href="./index.html">homepage</a></p>
        </center>
    </body>
    
</html>